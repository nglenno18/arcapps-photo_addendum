<html><head>
    <title>Photo Addendum</title>

    <meta charset="utf-8">
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>

<body>
<div id="page-container">
    <h1>Photo Addendum</h1>
    <p>Click a box, launch a file dialog, select a photo, add description</p>
    <div id="au">
      <span class="row">
        <div class="container1">
          <a class="box1" id="box1" onclick="selectBox(this)">
            <img class="img" src="images/temp2.png" align="center" width="270px" height="270px" object-fit="contain"></img>
          </a>
          <p class="fileID" color="#CCCCCC">fileID</p>
          <input type="textarea" float="left"></input>
        </div>

        <span class="space">.</span>
        <div class="container2">
          <a class="box2"  id="box2" onclick="selectBox(this)"><!--onclick="fileDialog.click()"-->
            <img class="img" src="images/temp2.png" align="center"></img>
          </a>
          <p class="fileID" color="#CCCCCC">fileID</p>
          <input type="textarea" float="right"></input>
        </div>
      </span>
      <div class="break">
        <br>
        <p text-color="white">asdfasdfsd</p>
        <br>
      </div>
  </div>
</div>

<div id="mid-body">
  <div class="clear-float"></div>
  <a id="add-row"><img src="images/down.png"/></img></a>
  <a id="add-images" onclick="$('#fd').click()"><img id="add-icon" src="images/add_icon.png"/></img></a>
  <input id="fd" type="file" accept=".png,.jpg,.JPG,.PNG" multiple/>
</div>


<script src="/socket.io/socket.io.js"></script>
<script src="js/libs/jquery-3.1.1.min.js"></script>
<script src="js/index.js"></script>
<script src="/js/delivery.js"></script>

</body>
<footer>
  <!-- <button id="pdf" display="none">Generate PDF</button> -->
  <button id="png">PNG</button>
  <button id="jpeg">JPEG</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
  <script src="/js/libs/dom-to-image.js"></script>
  <script src="/js/libs/filesaver.js"></script>

    <script>
    var node = document.body;
    var htmlimage;
    l = { orientation: 'p', unit: 'pt', format: 'a3', compress: true, fontSize: 8, lineHeight: 0, autoSize: false, printHeaders: true, pagesplit: true };
    var doc = new jsPDF(l);

    // $('#pdf').click(function(){
    //   doc.addHTML($('#page-container'),0,0,{pagesplit:true},function() {
    //      doc.save('CDC.pdf');
    //    });
    // });

    // doc.addHTML($('elementHTML'),{format:'png',pagesplit: true}});
    var pdf = new jsPDF('p','pt','a4');

    $('#png').click(function() {
      console.log('PNG...');
      domtoimage.toBlob(document.body)
      .then(function (blob) {
        window.saveAs(blob, 'my-node.png');
      })
      .catch(function (error) {
          console.error('oops, something went wrong!', error);
      });
    });

    $('#jpeg').click(function() {
      console.log('JPEG...');
      domtoimage.toJpeg(document.body, { quality: 0.5 })
      .then(function (dataUrl) {
          var link = document.createElement('a');
          link.download = 'photo_addendum.jpeg';
          link.href = dataUrl;
          link.click();
      }).catch(function (error) {
          console.error('oops, something went wrong!', error);
      });
    });
    </script>
    <script>
    // var arrayWithElements = new Array();

    // var clickListener = function(e) {
    //     var clickedElement;
    //     if(e == null) {
    //         clickedElement = event.srcElement;
    //     } else {
    //         clickedElement = e.target;
    //     }
    //     // arrayWithElements.push($(clickedElement).cssSelectorAsString()); // <====
    //     console.log(clickedElement);
    //     // console.log(clickedElement.hasClass('box'));
    //     console.log(clickedElement.getElementsByClassName("box"));
    //     console.log('ELEMENT: ', clickedElement.parentNode);
    //     var ele = clickedElement.parentNode;
    //     var isBox = clickedElement.parentNode.className;
    //
    //     }
    </script>

</footer>

</html>
